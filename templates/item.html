{% extends "base.html" %}
{% block title %}{{ item.name }}{% endblock %}
{% block style %}
  .itemBox {
    background-color: #f8f8f8; 
    overflow: auto; /* expands the div's height*/
    padding: 5px;
    margin-bottom: 5px;
    border-radius: 10px;
    border: 1px solid #e7e7e7;
    color: black;
  } 
  .itemImg, .itemInfo, .matList {
    background-color: white;
    border: 1px solid #e7e7e7;
    border-radius: 10px;
    overflow: hidden; /* so images dont overflow on the border */
  }
  .imgBox {
    margin: 0px auto;
    padding: 0 5px 0 0;
  }
  .itemLevel {
    font-weight: bold; 
    background-color: #5e5e5e;
    color: white; 
    padding: 2px;
  }
  .itemPower {
    float: right;
    margin-left: -30px; /* allow overlap with .itemName to prevent line break */
    font-family: arial;
    color: gold;
    padding-right: 5px;
    font-weight: bold;
    text-shadow: 1px 1px 1px maroon, 1px -1px 1px maroon, -1px -1px 1px maroon, -1px 1px 1px maroon;
  }
  .itemInfo {margin-bottom: 5px;}
  /* resource images */
  .icon {
    height: 30px;
    width: 30px;
  }
  {% for icon_list in icons_map %}
    {%- set outer_loop = loop -%}
    {%- for icon in icon_list -%}
      .icon-{{ icon }} {
        background-position: -{{ outer_loop.index0 * 30 }}px -{{ loop.index0 * 30}}px;
      }
    {% endfor -%}
  {% endfor %}
  .icon-resourceArtifact, .icon-currency {
    background-image: url('/static/icons.png');
    background-repeat: no-repeat;
  }
  .precraft {border-radius: 5px;}
  .precraft-normal {box-shadow: 0px 0px 15px lightgray inset;}
  .precraft-good {box-shadow: 0px 0px 15px lime inset;}
  .precraft-great {box-shadow: 0px 0px 15px royalblue  inset;} 
  .precraft-flawless {box-shadow: 0px 0px 15px cyan inset;}
  .precraft-epic {box-shadow: 0px 0px 15px orchid inset;}
  .precraft-legendary {box-shadow: 0px 0px 15px gold inset;}
  .precraft-mythical {box-shadow: 0px 0px 15px red inset;}
  
{% endblock style %}
{% block content %}
  
  <ol class="breadcrumb">
    <li><a href="/">Home</a></li>
    <li><a href="/items/{{item.category}}">{{item.category|capitalize}}</a></li>
    <li class="active">{{item.name}}</li>
  </ol>

  <h1>{{item.name}}</h1>
  
  <div class="col-sm-6 col-lg-4"><div class='itemBox'>
    <div class="col-xs-3 imgBox">
      <img class="img-responsive itemImg" 
        title="{{ item.name }}" 
        src="/static/{{item.category}}/{{ item.slug }}.png"/>
      <span class='itemPrice'>
        <img src='/static/transparent_dot.gif' class='icon icon-currency icon-coin'/>{{ item.price }}
      </span>
    </div>
    <div class="col-xs-9 nopadding">
      <div class='itemInfo'>
        <span class="itemLevel">{% if item.level < 10 %}&nbsp;{% endif %}{{ item.level }}</span>
        <span class="itemName">{{ item.name }}</span>
        <span class='itemPower'>{{ item.power }}</span>
      </div>
      <div class='matList'>
      
        <div class='row nopadding nomargin'> <!-- material icons -->
          {% for i in range(8) -%}
            {% if i in [0, 4] %}
              <div class="col-xs-6 nopadding">
                <div class="row nomargin">
            {% endif %}
                  <div class="col-xs-3 nopadding">
                    {%- if item.mats|length > i -%}
                      {%- if item.mats[i].kind in ['resource', 'artifact'] -%}
                        <img src='/static/transparent_dot.gif' class='icon icon-resourceArtifact icon-{{item.mats[i].slug}}' title='{{item.mats[i].name}}'/>
                      {%- else -%}
                        <a href="/item/{{item.mats[i].slug}}">
                          <img src="/static/{{item.mats[i].category}}/{{item.mats[i].slug}}.png" class="icon precraft precraft-{{item.mats[i].quality}}" title='{{item.mats[i].name}} ({{item.mats[i].quality}})'/>
                        </a>
                        <!--
                        <img src='/static/transparent_dot.gif' class='icon icon-heart precraft-{{item.mats[i].quality}}' title='{{item.mats[i].quality}} {{item.mats[i].name}}'/>
                        -->
                      {%- endif %}
                    {%- endif -%}
                  </div>
            {% if i in [3, 7] %}
                </div>
              </div>
            {% endif %}
          {% endfor -%}
        </div>
        
        <div class='row nopadding nomargin'> <!-- material quantities -->
          {% for i in range(8) -%}
            {% if i in [0, 4] %}
              <div class="col-xs-6 nopadding">
                <div class="row nomargin">
            {% endif %}
                  <div class="col-xs-3 nopadding">
                    {%- if item.mats|length > i -%}
                      {% if 10 > item.mats[i].qty %}&nbsp;&nbsp;{% endif %}
                      {% if 100 > item.mats[i].qty and item.mats[i].qty >= 10 %}&nbsp;{% endif %}
                      {{ item.mats[i].qty }}
                    {%- endif -%}
                  </div>
            {% if i in [3, 7] %}
                </div>
              </div>
            {% endif %}
          {% endfor -%}
        </div>
        
      </div> <!-- end list of materials -->
    </div> <!-- end of right side of itemBox -->
  </div></div>
  
    
{% endblock content %}

