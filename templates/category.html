{% extends "base.html" %}
{% block title %}{{ category|capitalize }}{% endblock title %}
{% block style %}
  .itemBox {
    background-color: #f8f8f8; 
    overflow: auto; /* expands the div's height*/
    padding: 5px;
    margin-bottom: 5px;
    border-radius: 10px;
    border: 1px solid #e7e7e7;
    color: black;
  } 
  .itemImg, .itemInfo, .matList {
    background-color: white;
    border: 1px solid #e7e7e7;
    border-radius: 10px;
    overflow: hidden; /* so images dont overflow on the border */
  }
  .imgBox {
    margin: 0px auto;
    padding: 0 5px 0 0;
  }
  .itemLevel {
    font-weight: bold; 
    background-color: #5e5e5e;
    color: white; 
    padding: 2px;
  }
  .itemPower {
    float: right;
    margin-left: -30px; /* allow overlap with .itemName to prevent line break */
    font-family: arial;
    color: gold;
    padding-right: 5px;
    font-weight: bold;
    text-shadow: 1px 1px 1px maroon, 1px -1px 1px maroon, -1px -1px 1px maroon, -1px 1px 1px maroon;
  }
  .itemInfo {margin-bottom: 5px;}
  /* resource images */
  .icon {
    background-image: url('/static/icons.png');
    background-repeat: no-repeat;
    height: 30px;
    width: 30px;
  }
  {% for icon_list in icons_map %}
    {% set outer_loop = loop %}
    {% for icon in icon_list %}
      .icon-{{ icon }} {
        background-position: -{{ outer_loop.index0 * 30 }}px -{{ loop.index0 * 30}}px;
      }
    {% endfor %}
  {% endfor %}

{% endblock style %}
{% block content %}
  <h1>{{ category|capitalize }}</h1>
  <div class='row itemList'>
    {% for item in items %}
      <div class="col-sm-6 col-lg-4"><div class='itemBox'>
        <div class="col-xs-4 imgBox">
          <img class="img-responsive itemImg" 
            title="{{ item.name }}" 
            src="{{ item.img }}"/>
          <span class='itemPrice'>
            <img src='/static/transparent_dot.gif' class='icon icon-coin'/>
            {{ item.price }}
          </span>
        </div>
        <div class="col-xs-8">
          <div class='itemInfo'>
            <span class="itemLevel">{% if item.level < 10 %}&nbsp;{% endif %}{{ item.level }}</span>
            <span class="itemName">{{ item.name }}</span>
            <span class='itemPower'>{{ item.power }}</span>
          </div>
          <div class='row matList'>
            {% for mat in item.mats %}
              <div class="col-xs-4 nopadding">
                <img src='/static/transparent_dot.gif' class='icon icon-{{ mat.slug }}' title='{{ mat.name }}'/>
                {{mat.qty}}
              </div>
              {% if loop.index0 % 3 == 2 %}
                <div class="clearfix visible-xs-block visible-sm-block"></div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div></div>

      <div class="clearfix visible-xs-block"></div>
      {% if loop.index0 % 2 == 1 %}
        <div class="clearfix visible-sm-block visible-md-block"></div>
      {% endif %}
      {% if loop.index0 % 3 == 2 %}
        <div class="clearfix visible-lg-block"></div>
      {% endif %}
    {% endfor %}
  </div>
{% endblock content %}